<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Connections Fail with Certificate Errors when Using Full TLS Authentication with Trusted Certificates | VMware vSphere Integrated Containers Engine 0.9 for vSphere Administrators</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="./feedback.html" />
    
    
    <link rel="prev" href="./ts_delete_inspect_error.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="7.4"
        data-chapter-title="Connections Fail with Certificate Errors when Using Full TLS Authentication with Trusted Certificates"
        data-filepath="ts_clock_skew.md"
        data-basepath="."
        data-revision="Thu Mar 09 2017 18:02:39 GMT+0100 (W. Europe Standard Time)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="interop.html">
            
                
                    <a href="./interop.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Interoperability with Other VMware Software
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="vch_admin.html">
            
                
                    <a href="./vch_admin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        VCH Administration
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="vic_machine_version.html">
            
                
                    <a href="./vic_machine_version.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Obtain vic-machine Version Information
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="common_vic_options.html">
            
                
                    <a href="./common_vic_options.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Common vic-machine Options
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="list_vch.html">
            
                
                    <a href="./list_vch.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        List VCHs and Obtain Their IDs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="inspect_vch.html">
            
                
                    <a href="./inspect_vch.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Obtain VCH Information
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="remove_vch.html">
            
                
                    <a href="./remove_vch.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        Delete a VCH
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="delete_vch_options.html">
            
                
                    <a href="./delete_vch_options.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.1.</b>
                        
                        VCH Delete Options
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="upgrade_vch.html">
            
                
                    <a href="./upgrade_vch.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        Upgrade a Virtual Container Host
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.6.1" data-path="upgrade_vch_options.html">
            
                
                    <a href="./upgrade_vch_options.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.1.</b>
                        
                        Virtual Container Host Upgrade Options
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="vch_portlet_ui.html">
            
                
                    <a href="./vch_portlet_ui.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Find VCH Information in the vSphere Web Client
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="container_portlet_ui.html">
            
                
                    <a href="./container_portlet_ui.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Find Container Information in the vSphere Web Client
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="upgrade_ui_plugin.html">
            
                
                    <a href="./upgrade_ui_plugin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Upgrade the vSphere Integrated Containers Engine Plug-In
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="access_vicadmin.html">
            
                
                    <a href="./access_vicadmin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Access the VCH Admin Portal
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="browser_login.html">
            
                
                    <a href="./browser_login.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Browser-Based Certificate Login
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="cmdline_login.html">
            
                
                    <a href="./cmdline_login.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Command Line Certificate Login
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="vicadmin_status_ref.html">
            
                
                    <a href="./vicadmin_status_ref.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        VCH Admin Status Reference
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="troubleshoot_vic_admin.html">
            
                
                    <a href="./troubleshoot_vic_admin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Troubleshooting
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="log_bundles.html">
            
                
                    <a href="./log_bundles.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Access Log Bundles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="debug_vch.html">
            
                
                    <a href="./debug_vch.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Debugging the VCH
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.2.1" data-path="vch_shell_access.html">
            
                
                    <a href="./vch_shell_access.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.1.</b>
                        
                        Enable Shell Access to the VCH Endpoint VM
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2.2" data-path="vch_ssh_access.html">
            
                
                    <a href="./vch_ssh_access.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.2.</b>
                        
                        Authorize SSH Access to the VCH Endpoint VM
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2.3" data-path="debug_vch_options.html">
            
                
                    <a href="./debug_vch_options.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.3.</b>
                        
                        VCH Debug Options
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="ts_delete_inspect_error.html">
            
                
                    <a href="./ts_delete_inspect_error.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        Deleting or Inspecting a VCH Fails with an Error
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="7.4" data-path="ts_clock_skew.html">
            
                
                    <a href="./ts_clock_skew.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.</b>
                        
                        Connections Fail with Certificate Errors when Using Full TLS Authentication with Trusted Certificates
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="feedback.html">
            
                
                    <a href="./feedback.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Send Documentation Feedback
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >VMware vSphere Integrated Containers Engine 0.9 for vSphere Administrators</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="connections-fail-with-certificate-errors-when-using-full-tls-authentication-with-trusted-certificates">Connections Fail with Certificate Errors when Using Full TLS Authentication with Trusted Certificates</h1>
<p>Connections to a virtual container host (VCH) that uses full TLS authentication with trusted Certificate Authority (CA) certificates fail with certificate errors.</p>
<h2 id="problem">Problem</h2>
<ul>
<li><code>vic-machine</code> operations on a VCH result in a &quot;bad certificate&quot; error:
<pre>Connection failed with TLS error &quot;bad certificate&quot; 
check for clock skew on the host
Collecting host-227 hostd.log
vic-machine-windows.exe failed: tls: bad certificate
</pre>
<strong>NOTE</strong>: <code>vic-machine</code> tolerates a 1 day skew. A skew of 1 day might result in a different certificate error than time skew.</li>
<li>Connections to the VCH Admin portal for the VCH fail with an <code>ERR_CERT_DATE_INVALID</code> error.</li>
<li>Connections to the VCH from Docker clients fail with a <code>bad certificate</code> error.</li>
</ul>
<h2 id="cause">Cause</h2>
<p>There is potentially a clock skew between the VCH and the system from which you are connecting to the VCH.</p>
<h2 id="solution">Solution</h2>
<ol>
<li>Go to the VCH Admin portal for the VCH at https://<i>vch_address</i>:2378 and check the System Time under <strong>VCH Info</strong>.</li>
<li><p>If the system time of the VCH is wrong, run <code>vic-machine debug</code> to enable SSH access to the VCH. </p>
<p>For information about enabling SSH on a VCH, see <a href="vch_ssh_access.html">Authorize SSH Access to the VCH Endpoint VM</a>.</p>
</li>
<li>Connect to the VCH endpoit VM by using SSH.</li>
<li><p>Use the <code>date --set</code> Linux command to set the system clock to the correct date and time.</p>
<p>The two most common date formats are the following:</p>
<ul>
<li>Unix Time Stamp: <code>date --set=&apos;@1480969133&apos;</code></li>
<li><code>YYYYMMDD HH:MM</code> format: <code>date --set=&quot;20161205 14:31&quot;</code>  </li>
</ul>
</li>
</ol>
<p>To prevent this issue recurring on VCHs that you deploy in the future, verify that the host time is correct on the ESXi host on which you deploy VCHs. For information about verifying time synchronization on ESXi hosts, see <a href="https://kb.vmware.com/kb/1003736" target="_blank">VMware KB 1003736</a>.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./ts_delete_inspect_error.html" class="navigation navigation-prev " aria-label="Previous page: Deleting or Inspecting a VCH Fails with an Error"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./feedback.html" class="navigation navigation-next " aria-label="Next page: Send Documentation Feedback"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
